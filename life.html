<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Life Journey</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js"></script>
  <style>
    body {
      margin: 0;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: #222;
      font-family: 'Courier New', monospace;
      overflow: hidden;
    }
    canvas {
      border: 2px solid #fff;
    }
    #instructions {
      position: absolute;
      top: 20px;
      left: 20px;
      color: white;
      font-size: 16px;
      text-shadow: 1px 1px 3px rgba(0,0,0,0.6);
    }
  </style>
</head>
<body>
  <div id="instructions">Press Right Arrow to start my life journey!</div>
  <script>
    let backgroundX = 0;
    let speed = 0; // Starts at 0, updated when right arrow is pressed
    const characterX = 200; // Fixed character position
    let bgImage, char1, char2;
    let currentChar;
    let frameCounter = 0;
    let milestones = [
      { x: 400, year: "2018.03", text: "숭실대 글로벌미디어학부 입학" },
      { x: 800, year: "2018.12", text: "휴학" },
      { x: 1200, year: "2019.01", text: "비건카페 리코 다방 창업" },
      { x: 1600, year: "2020.07", text: "복학, 숭실대 의생명시스템학부 전과" },
      { x: 2000, year: "2020.12", text: "휴학" },
      { x: 2400, year: "2020.12", text: "위투게더 내몸에안심 PM" },
      { x: 2800, year: "2022.07", text: "네발연구소 창업, 플래닛타임즈 기자" },
      { x: 3200, year: "2023.06", text: "네이버 커넥트재단 Content Manager" }
    ];

    function preload() {
      bgImage = loadImage('https://assets.carat-api.im/moqoavjxc/01K3PWRQQ57RY0C6YNQTHJBMHP.jpeg');
      char1 = loadImage('cha01.png');
      char2 = loadImage('cha02.png');
    }

    function setup() {
      createCanvas(800, 600); // Increased height for better visibility
      textFont('Courier New');
      currentChar = char1; // Start with first character image
    }

    function draw() {
      background(50);
      // Draw tiled background image
      let bgWidth = bgImage.width;
      let offset = backgroundX % bgWidth;
      image(bgImage, offset, 0, bgWidth, height);
      image(bgImage, offset + bgWidth, 0, bgWidth, height);
      // Draw ground
      fill(100, 150); // Semi-transparent ground to see background
      rect(backgroundX, height - 50, width * 2, 50);
      // Switch character images for running effect
      if (speed > 0) {
        frameCounter++;
        if (frameCounter % 10 === 0) {
          currentChar = (currentChar === char1) ? char2 : char1;
        }
      }
      // Draw character
      image(currentChar, characterX, height - 100, 50, 50); // Adjusted size
      // Draw milestones
      fill(255);
      textSize(16);
      textAlign(CENTER);
      milestones.forEach(m => {
        let relativeX = m.x + backgroundX;
        if (relativeX > characterX - 50 && relativeX < characterX + 50) {
          text(`${m.year}: ${m.text}`, characterX, height - 120);
        }
        if (relativeX > 0 && relativeX < width) {
          fill(255, 255, 0);
          rect(relativeX, height - 50, 2, 10);
        }
      });
      // Move background
      backgroundX -= speed;
      // Loop background
      if (backgroundX < -width) {
        backgroundX += width;
      }
    }

    function keyPressed() {
      if (keyCode === RIGHT_ARROW) {
        speed = 2;
      }
    }

    function keyReleased() {
      if (keyCode === RIGHT_ARROW) {
        speed = 0;
      }
    }
  </script>
</body>
</html>
