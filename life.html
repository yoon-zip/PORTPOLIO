<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>My Life Journey Game (Fixed)</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.4.2/p5.min.js"></script>
  <style>
    body {
      margin: 0;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background-color: #1a1a1a;
      font-family: 'Courier New', Courier, monospace;
    }
    canvas {
      border: 2px solid #fff;
      image-rendering: pixelated;
    }
  </style>
</head>
<body>
  <script>
    // --- Game State ---
    let player;
    let spriteImg = null;      // loaded PNG (if available)
    let fallbackSprite = null; // procedural fallback graphic
    let bgX = 0;
    let speed = 2;
    let spriteLoaded = false;

    // Replace with your PNG path or URL (CORS-safe if hosted).
    const spriteURL = "path/to/your/character.png";

    const milestones = [
      { year: "2018.03", text: "숭실대 글로벌미디어학부 입학", x: 100,  visible: false, scale: 0 },
      { year: "2018.12", text: "휴학",                         x: 300,  visible: false, scale: 0 },
      { year: "2019.01", text: "비건카페 리코 다방 창업",       x: 500,  visible: false, scale: 0 },
      { year: "2020.06", text: "비건카페 리코 다방 종료",       x: 700,  visible: false, scale: 0 },
      { year: "2020.07", text: "복학, 숭실대 의생명시스템학부 전과", x: 900,  visible: false, scale: 0 },
      { year: "2020.12", text: "휴학",                         x: 1100, visible: false, scale: 0 },
      { year: "2020.12", text: "위투게더 내몸에안심 PM",        x: 1300, visible: false, scale: 0 },
      { year: "2022.06", text: "위투게더 종료",                 x: 1500, visible: false, scale: 0 },
      { year: "2022.07", text: "네발연구소 창업, 플래닛타임즈 기자", x: 1700, visible: false, scale: 0 },
      { year: "2023.06", text: "네이버 커넥트재단 Content Manager", x: 1900, visible: false, scale: 0 },
    ];

    // --- p5 lifecycle ---
    function preload() {
      // Try loading the external sprite. If it fails, we'll keep using fallback.
      spriteImg = loadImage(
        spriteURL,
        () => { spriteLoaded = true; },
        () => { spriteLoaded = false; }
      );
    }

    function setup() {
      createCanvas(800, 400);

      // Always create a fallback sprite so we can draw something even if the PNG isn't available yet.
      fallbackSprite = createGraphics(8, 8);
      fallbackSprite.pixelDensity(1);
      // transparent background on the sprite buffer
      fallbackSprite.clear();
      // draw a tiny 8x8 pixel character
      fallbackSprite.noStroke();
      fallbackSprite.fill(255);            // head
      fallbackSprite.rect(2, 0, 4, 2);
      fallbackSprite.fill(100, 100, 255);  // body
      fallbackSprite.rect(2, 2, 4, 4);
      fallbackSprite.fill(255, 255, 0);    // legs
      fallbackSprite.rect(2, 6, 2, 2);

      player = { x: 50, y: height - 100, w: 32, h: 32 };
      textFont('Courier New');
    }

    function draw() {
      // --- Background grid ---
      background(50);
